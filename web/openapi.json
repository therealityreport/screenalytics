{
  "openapi": "3.1.0",
  "info": {
    "title": "Screenalytics API",
    "version": "0.1.0"
  },
  "paths": {
    "/episodes": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "List Episodes",
        "description": "List all episodes.\n\nShow slugs are normalized to UPPERCASE for consistent display.",
        "operationId": "list_episodes_episodes_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Create Episode",
        "operationId": "create_episode_episodes_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EpisodeCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/s3_videos": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "List S3 Videos",
        "operationId": "list_s3_videos_episodes_s3_videos_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Q"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 200,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/S3VideosResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/s3_shows": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "List S3 Shows",
        "description": "List all shows available in S3 with episode counts.\n\nShow codes are normalized to UPPERCASE and deduplicated case-insensitively.",
        "operationId": "list_s3_shows_episodes_s3_shows_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/S3ShowsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/s3_shows/{show}/episodes": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "List S3 Episodes For Show",
        "description": "List all episodes for a specific show from S3.",
        "operationId": "list_s3_episodes_for_show_episodes_s3_shows__show__episodes_get",
        "parameters": [
          {
            "name": "show",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/S3EpisodesForShowResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/delete": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Episode New",
        "operationId": "delete_episode_new_episodes__ep_id__delete_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/DeleteEpisodeIn"
                  }
                ],
                "default": {
                  "include_s3": true,
                  "delete_raw": false,
                  "delete_local": true
                },
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Episode New Episodes  Ep Id  Delete Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/delete_all": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete All",
        "operationId": "delete_all_episodes_delete_all_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteAllIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete All Episodes Delete All Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}": {
      "delete": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Episode",
        "operationId": "delete_episode_episodes__ep_id__delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/DeleteEpisodeLegacyIn"
                  }
                ],
                "default": {
                  "delete_artifacts": true,
                  "delete_raw": false,
                  "delete_local": true
                },
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Episode Episodes  Ep Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Episode Details",
        "operationId": "episode_details_episodes__ep_id__get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/purge_all": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Purge All",
        "operationId": "purge_all_episodes_purge_all_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PurgeAllLegacyIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Purge All Episodes Purge All Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/progress": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Episode Progress",
        "operationId": "episode_progress_episodes__ep_id__progress_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Episode Progress Episodes  Ep Id  Progress Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/status": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Episode Run Status",
        "operationId": "episode_run_status_episodes__ep_id__status_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/events": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Episode Events",
        "operationId": "episode_events_episodes__ep_id__events_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "poll_ms",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10000,
              "minimum": 200,
              "default": 1500,
              "title": "Poll Ms"
            }
          },
          {
            "name": "max_events",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 2000,
              "minimum": 1,
              "default": 250,
              "title": "Max Events"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/upsert_by_id": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Upsert By Id",
        "operationId": "upsert_by_id_episodes_upsert_by_id_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EpisodeUpsert"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Upsert By Id Episodes Upsert By Id Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/assets": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Presign Episode Assets",
        "operationId": "presign_episode_assets_episodes__ep_id__assets_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssetUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/mirror": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Mirror Episode Video",
        "operationId": "mirror_episode_video_episodes__ep_id__mirror_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeMirrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/hydrate": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Hydrate Episode Video",
        "operationId": "hydrate_episode_video_episodes__ep_id__hydrate_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeMirrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/mirror_artifacts": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Mirror Episode Artifacts",
        "description": "Mirror faces/identities artifacts from S3 to local storage.\n\nThis endpoint downloads manifest files (faces.jsonl, identities.json) from S3\nto the local file system, enabling clustering operations on machines that\ndon't have direct S3 access or need local copies.\n\nUnlike /mirror which only mirrors the video, this mirrors the pipeline artifacts.",
        "operationId": "mirror_episode_artifacts_episodes__ep_id__mirror_artifacts_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/MirrorArtifactsRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MirrorArtifactsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/refresh_similarity": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Refresh Similarity Values",
        "description": "Recompute all similarity scores for the episode.\n\nThis regenerates track representatives, cluster centroids, updates\nall similarity scores, and refreshes suggestions for unassigned clusters.\n\nReturns detailed step-by-step progress log with stats.",
        "operationId": "refresh_similarity_values_episodes__ep_id__refresh_similarity_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Refresh Similarity Values Episodes  Ep Id  Refresh Similarity Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/refresh_similarity_async": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Refresh Similarity Async",
        "description": "Enqueue similarity refresh as background job (non-blocking).\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nIf Celery/Redis are unavailable in redis mode, returns an error.",
        "operationId": "refresh_similarity_async_episodes__ep_id__refresh_similarity_async_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/RefreshSimilarityRequest"
                  }
                ],
                "default": {
                  "execution_mode": "redis"
                },
                "title": "Body"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Refresh Similarity Async Episodes  Ep Id  Refresh Similarity Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/recover_noise_tracks/preview": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Recover Noise Tracks Preview",
        "description": "Preview what would change if recovery were run (without making changes).\n\nReturns counts of single-frame tracks and estimated recoverable tracks.",
        "operationId": "recover_noise_tracks_preview_episodes__ep_id__recover_noise_tracks_preview_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "frame_window",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "description": "Number of frames to search before/after",
              "default": 8,
              "title": "Frame Window"
            },
            "description": "Number of frames to search before/after"
          },
          {
            "name": "min_similarity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "maximum": 1.0,
              "minimum": 0.5,
              "description": "Minimum cosine similarity to merge",
              "default": 0.7,
              "title": "Min Similarity"
            },
            "description": "Minimum cosine similarity to merge"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Recover Noise Tracks Preview Episodes  Ep Id  Recover Noise Tracks Preview Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/recover_noise_tracks": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Recover Noise Tracks",
        "description": "Recover single-frame tracks by finding similar faces in adjacent frames.\n\nFor each track that has only 1 face (single-frame track):\n1. Searches \u00b1frame_window frames for similar faces (cosine similarity >= min_similarity)\n2. Merges matching faces into the single-frame track\n3. Updates faces.jsonl and tracks.jsonl with new assignments\n\nThis helps convert \"noise\" clusters (single-frame-only) into reviewable clusters.\n\nArgs:\n    frame_window: Number of frames to search before/after (default: 8)\n    min_similarity: Minimum cosine similarity to merge faces (default: 0.70)\n\nReturns:\n    tracks_analyzed: Number of single-frame tracks examined\n    tracks_expanded: Number of tracks that were expanded\n    faces_merged: Total faces added to tracks\n    details: List of {track_id, original_frame, added_frames}",
        "operationId": "recover_noise_tracks_episodes__ep_id__recover_noise_tracks_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "frame_window",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "description": "Number of frames to search before/after",
              "default": 8,
              "title": "Frame Window"
            },
            "description": "Number of frames to search before/after"
          },
          {
            "name": "min_similarity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "maximum": 1.0,
              "minimum": 0.5,
              "description": "Minimum cosine similarity to merge",
              "default": 0.7,
              "title": "Min Similarity"
            },
            "description": "Minimum cosine similarity to merge"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Recover Noise Tracks Episodes  Ep Id  Recover Noise Tracks Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/video_meta": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Episode Video Meta",
        "operationId": "episode_video_meta_episodes__ep_id__video_meta_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EpisodeVideoMeta"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "List Identities",
        "operationId": "list_identities_episodes__ep_id__identities_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Identities Episodes  Ep Id  Identities Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cluster_tracks": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "List Cluster Tracks",
        "operationId": "list_cluster_tracks_episodes__ep_id__cluster_tracks_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "limit_per_cluster",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "minimum": 1
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional max tracks per cluster",
              "title": "Limit Per Cluster"
            },
            "description": "Optional max tracks per cluster"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Cluster Tracks Episodes  Ep Id  Cluster Tracks Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/{cluster_id}/track_reps": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Get Cluster Track Reps",
        "description": "Get representative frames with similarity scores for all tracks in a cluster.",
        "operationId": "get_cluster_track_reps_episodes__ep_id__clusters__cluster_id__track_reps_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "cluster_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cluster Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Cluster Track Reps Episodes  Ep Id  Clusters  Cluster Id  Track Reps Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/people/{person_id}/clusters_summary": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Get Person Clusters Summary",
        "description": "Get clusters summary with track representatives for a person in an episode.",
        "operationId": "get_person_clusters_summary_episodes__ep_id__people__person_id__clusters_summary_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Person Clusters Summary Episodes  Ep Id  People  Person Id  Clusters Summary Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/faces_grid": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Faces Grid",
        "operationId": "faces_grid_episodes__ep_id__faces_grid_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Track Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Faces Grid Episodes  Ep Id  Faces Grid Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities/{identity_id}": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Identity Detail",
        "operationId": "identity_detail_episodes__ep_id__identities__identity_id__get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "identity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Identity Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Identity Detail Episodes  Ep Id  Identities  Identity Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Identity",
        "description": "Delete (archive) an identity/cluster.\n\nThe cluster is moved to the archive where its centroid is stored.\nThis allows matching faces in future episodes to be auto-archived.",
        "operationId": "delete_identity_episodes__ep_id__identities__identity_id__delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "identity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Identity Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Identity Episodes  Ep Id  Identities  Identity Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Track Detail",
        "operationId": "track_detail_episodes__ep_id__tracks__track_id__get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Track Detail Episodes  Ep Id  Tracks  Track Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Track",
        "operationId": "delete_track_episodes__ep_id__tracks__track_id__delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/TrackDeleteRequest"
                  }
                ],
                "default": {
                  "delete_faces": true
                },
                "title": "Payload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Track Episodes  Ep Id  Tracks  Track Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/crops": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "List Track Crops",
        "operationId": "list_track_crops_episodes__ep_id__tracks__track_id__crops_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          },
          {
            "name": "sample",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Return every Nth crop",
              "default": 1,
              "title": "Sample"
            },
            "description": "Return every Nth crop"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 200,
              "title": "Limit"
            }
          },
          {
            "name": "start_after",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Opaque cursor returned by the previous call",
              "title": "Start After"
            },
            "description": "Opaque cursor returned by the previous call"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Track Crops Episodes  Ep Id  Tracks  Track Id  Crops Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/frames": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "List Track Frames",
        "operationId": "list_track_frames_episodes__ep_id__tracks__track_id__frames_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          },
          {
            "name": "sample",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Return every Nth frame",
              "default": 1,
              "title": "Sample"
            },
            "description": "Return every Nth frame"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 50,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Track Frames Episodes  Ep Id  Tracks  Track Id  Frames Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Track Frames",
        "operationId": "delete_track_frames_episodes__ep_id__tracks__track_id__frames_delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackFrameDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Track Frames Episodes  Ep Id  Tracks  Track Id  Frames Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/integrity": {
      "get": {
        "tags": [
          "episodes"
        ],
        "summary": "Track Integrity",
        "operationId": "track_integrity_episodes__ep_id__tracks__track_id__integrity_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Track Integrity Episodes  Ep Id  Tracks  Track Id  Integrity Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/frames/move": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Move Track Frames",
        "operationId": "move_track_frames_episodes__ep_id__tracks__track_id__frames_move_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackFrameMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Move Track Frames Episodes  Ep Id  Tracks  Track Id  Frames Move Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities/{identity_id}/rename": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Rename Identity",
        "operationId": "rename_identity_episodes__ep_id__identities__identity_id__rename_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "identity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Identity Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdentityRenameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Rename Identity Episodes  Ep Id  Identities  Identity Id  Rename Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities/{identity_id}/name": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Assign Identity Name",
        "operationId": "assign_identity_name_episodes__ep_id__identities__identity_id__name_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "identity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Identity Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdentityNameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Assign Identity Name Episodes  Ep Id  Identities  Identity Id  Name Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/name": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Assign Track Name",
        "operationId": "assign_track_name_episodes__ep_id__tracks__track_id__name_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdentityNameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Assign Track Name Episodes  Ep Id  Tracks  Track Id  Name Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/bulk_assign": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Bulk Assign Tracks",
        "description": "Bulk assign multiple tracks to a cast member by name.\n\nThis creates or updates identity assignments for each track, similar to\ncalling assign_track_name for each track individually but more efficient.",
        "operationId": "bulk_assign_tracks_episodes__ep_id__tracks_bulk_assign_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkTrackAssignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Bulk Assign Tracks Episodes  Ep Id  Tracks Bulk Assign Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities/merge": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Merge Identities",
        "operationId": "merge_identities_episodes__ep_id__identities_merge_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdentityMergeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Merge Identities Episodes  Ep Id  Identities Merge Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tracks/{track_id}/move": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Move Track",
        "operationId": "move_track_episodes__ep_id__tracks__track_id__move_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "track_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Track Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Move Track Episodes  Ep Id  Tracks  Track Id  Move Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/faces/move_frames": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Move Faces",
        "operationId": "move_faces_episodes__ep_id__faces_move_frames_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FaceMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Move Faces Episodes  Ep Id  Faces Move Frames Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/frames/{frame_idx}/overlay": {
      "post": {
        "tags": [
          "episodes"
        ],
        "summary": "Generate Frame Overlay",
        "description": "Generate a full-frame image with bounding boxes for all faces in that frame.\n\nThis extracts the frame from the video, draws colored bounding boxes for each\ntrack present in that frame, and saves the result as an overlay image.\n\nReturns:\n    {\n        \"url\": \"path/to/overlay.jpg\",\n        \"frame_idx\": 804,\n        \"tracks\": [{\"track_id\": 1, \"bbox\": [x1,y1,x2,y2]}, ...]\n    }",
        "operationId": "generate_frame_overlay_episodes__ep_id__frames__frame_idx__overlay_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "frame_idx",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Frame Idx"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Generate Frame Overlay Episodes  Ep Id  Frames  Frame Idx  Overlay Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/frames": {
      "delete": {
        "tags": [
          "episodes"
        ],
        "summary": "Delete Frame",
        "operationId": "delete_frame_episodes__ep_id__frames_delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FrameDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Frame Episodes  Ep Id  Frames Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/identities/{identity_id}/export_seeds": {
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Export Facebank Seeds",
        "description": "Select and export high-quality seed frames to permanent facebank.\nOnly exports user-confirmed identities with person_id mappings.",
        "operationId": "export_facebank_seeds_episodes__ep_id__identities__identity_id__export_seeds_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "identity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Identity Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Export Facebank Seeds Episodes  Ep Id  Identities  Identity Id  Export Seeds Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/presence": {
      "get": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Get Presence",
        "description": "Get current viewers for an episode.\n\nReturns list of users currently viewing this episode,\nexcluding viewers whose heartbeat has expired.",
        "operationId": "get_presence_episodes__ep_id__presence_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Presence Episodes  Ep Id  Presence Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Update Presence",
        "description": "Update presence heartbeat for a user viewing an episode.\n\nCall this endpoint periodically (every 30s) to maintain presence.",
        "operationId": "update_presence_episodes__ep_id__presence_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/PresenceHeartbeat"
                  }
                ],
                "title": "Heartbeat"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Update Presence Episodes  Ep Id  Presence Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "episodes",
          "episodes"
        ],
        "summary": "Leave Presence",
        "description": "Remove presence for a user (when leaving the page).",
        "operationId": "leave_presence_episodes__ep_id__presence_delete",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Leave Presence Episodes  Ep Id  Presence Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/identities/{ep_id}/rename": {
      "post": {
        "tags": [
          "identities"
        ],
        "summary": "Rename Identity",
        "operationId": "rename_identity_identities__ep_id__rename_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RenameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Rename Identity Identities  Ep Id  Rename Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/identities/{ep_id}/merge": {
      "post": {
        "tags": [
          "identities"
        ],
        "summary": "Merge Identities",
        "operationId": "merge_identities_identities__ep_id__merge_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MergeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Merge Identities Identities  Ep Id  Merge Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/identities/{ep_id}/move_track": {
      "post": {
        "tags": [
          "identities"
        ],
        "summary": "Move Track",
        "operationId": "move_track_identities__ep_id__move_track_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveTrackRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Move Track Identities  Ep Id  Move Track Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/identities/{ep_id}/drop_track": {
      "post": {
        "tags": [
          "identities"
        ],
        "summary": "Drop Track",
        "operationId": "drop_track_identities__ep_id__drop_track_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DropTrackRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Drop Track Identities  Ep Id  Drop Track Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/identities/{ep_id}/drop_frame": {
      "post": {
        "tags": [
          "identities"
        ],
        "summary": "Drop Frame",
        "operationId": "drop_frame_identities__ep_id__drop_frame_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DropFrameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Drop Frame Identities  Ep Id  Drop Frame Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show}/roster": {
      "get": {
        "tags": [
          "shows"
        ],
        "summary": "Get Roster",
        "operationId": "get_roster_shows__show__roster_get",
        "parameters": [
          {
            "name": "show",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Roster Shows  Show  Roster Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show}/roster/names": {
      "post": {
        "tags": [
          "shows"
        ],
        "summary": "Add Roster Name",
        "operationId": "add_roster_name_shows__show__roster_names_post",
        "parameters": [
          {
            "name": "show",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CastNameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Add Roster Name Shows  Show  Roster Names Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show}/cast_names": {
      "get": {
        "tags": [
          "shows"
        ],
        "summary": "List Cast Names",
        "operationId": "list_cast_names_shows__show__cast_names_get",
        "parameters": [
          {
            "name": "show",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Cast Names Shows  Show  Cast Names Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "shows"
        ],
        "summary": "Add Cast Name",
        "operationId": "add_cast_name_shows__show__cast_names_post",
        "parameters": [
          {
            "name": "show",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CastNameRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Add Cast Name Shows  Show  Cast Names Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows": {
      "get": {
        "tags": [
          "cast"
        ],
        "summary": "List Registered Shows",
        "operationId": "list_registered_shows_shows_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShowListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "cast"
        ],
        "summary": "Register Show",
        "operationId": "register_show_shows_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ShowCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShowRegistrationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/cast": {
      "get": {
        "tags": [
          "cast"
        ],
        "summary": "List Cast",
        "description": "Get all cast members for a show, optionally filtered by season.",
        "operationId": "list_cast_shows__show_id__cast_get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "season",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Season"
            }
          },
          {
            "name": "include_featured",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include featured thumbnail URLs sourced from facebank",
              "default": false,
              "title": "Include Featured"
            },
            "description": "Include featured thumbnail URLs sourced from facebank"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Cast Shows  Show Id  Cast Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "cast"
        ],
        "summary": "Create Cast Member",
        "description": "Create a new cast member.",
        "operationId": "create_cast_member_shows__show_id__cast_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CastMemberCreateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CastMemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/cast/{cast_id}": {
      "get": {
        "tags": [
          "cast"
        ],
        "summary": "Get Cast Member",
        "description": "Get a specific cast member.",
        "operationId": "get_cast_member_shows__show_id__cast__cast_id__get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CastMemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "cast"
        ],
        "summary": "Update Cast Member",
        "description": "Update a cast member.",
        "operationId": "update_cast_member_shows__show_id__cast__cast_id__patch",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CastMemberUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CastMemberResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "cast"
        ],
        "summary": "Delete Cast Member",
        "description": "Delete a cast member.",
        "operationId": "delete_cast_member_shows__show_id__cast__cast_id__delete",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Cast Member Shows  Show Id  Cast  Cast Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/cast/import": {
      "post": {
        "tags": [
          "cast"
        ],
        "summary": "Bulk Import Cast",
        "description": "Bulk import cast members.\n\nMembers with matching names (case-insensitive) will be updated unless force_new=true.\n\nExample JSON:\n{\n  \"members\": [\n    {\n      \"name\": \"Kyle Richards\",\n      \"role\": \"main\",\n      \"status\": \"active\",\n      \"aliases\": [\"Kyle\", \"Kyle R\"],\n      \"seasons\": [\"S01\", \"S02\", \"S03\"]\n    }\n  ],\n  \"force_new\": false\n}",
        "operationId": "bulk_import_cast_shows__show_id__cast_import_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkImportRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Bulk Import Cast Shows  Show Id  Cast Import Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/cast/{cast_id}/facebank": {
      "get": {
        "tags": [
          "facebank"
        ],
        "summary": "Get Facebank",
        "description": "Get facebank data for a cast member.",
        "operationId": "get_facebank_cast__cast_id__facebank_get",
        "parameters": [
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          },
          {
            "name": "show_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FacebankResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/cast/{cast_id}/seeds/upload": {
      "post": {
        "tags": [
          "facebank"
        ],
        "summary": "Upload Seeds",
        "description": "Upload seed images for a cast member.",
        "operationId": "upload_seeds_cast__cast_id__seeds_upload_post",
        "parameters": [
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          },
          {
            "name": "show_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_seeds_cast__cast_id__seeds_upload_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/cast/{cast_id}/seeds": {
      "delete": {
        "tags": [
          "facebank"
        ],
        "summary": "Delete Seeds",
        "description": "Delete seed images from a cast member's facebank.",
        "operationId": "delete_seeds_cast__cast_id__seeds_delete",
        "parameters": [
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          },
          {
            "name": "show_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteSeedsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Seeds Cast  Cast Id  Seeds Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/cast/{cast_id}/seeds/{seed_id}/feature": {
      "post": {
        "tags": [
          "facebank"
        ],
        "summary": "Feature Seed",
        "description": "Mark a seed as the featured facebank image.",
        "operationId": "feature_seed_cast__cast_id__seeds__seed_id__feature_post",
        "parameters": [
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          },
          {
            "name": "seed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Seed Id"
            }
          },
          {
            "name": "show_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureSeedResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/cast/{cast_id}/seeds/{seed_id}/image": {
      "get": {
        "tags": [
          "facebank"
        ],
        "summary": "Get Seed Image",
        "description": "Serve a seed image file (fallback for local storage without S3).",
        "operationId": "get_seed_image_cast__cast_id__seeds__seed_id__image_get",
        "parameters": [
          {
            "name": "cast_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cast Id"
            }
          },
          {
            "name": "seed_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Seed Id"
            }
          },
          {
            "name": "show_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/files/presign": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Presign Image",
        "description": "Generate a presigned URL for an S3 object with proper content-type headers.",
        "operationId": "presign_image_files_presign_get",
        "parameters": [
          {
            "name": "key",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "S3 object key",
              "title": "Key"
            },
            "description": "S3 object key"
          },
          {
            "name": "mime",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Content type override",
              "title": "Mime"
            },
            "description": "Content type override"
          },
          {
            "name": "ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 86400,
              "minimum": 60,
              "description": "URL expiration in seconds",
              "default": 3600,
              "title": "Ttl"
            },
            "description": "URL expiration in seconds"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Presign Image Files Presign Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/files/health": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Check Image Health",
        "description": "Check if an image exists and is accessible, with optional image diagnostics.",
        "operationId": "check_image_health_files_health_get",
        "parameters": [
          {
            "name": "path_or_key",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Local path or S3 key",
              "title": "Path Or Key"
            },
            "description": "Local path or S3 key"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Check Image Health Files Health Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health/detector": {
      "get": {
        "tags": [
          "files"
        ],
        "summary": "Check Detector Health",
        "description": "Check RetinaFace detector availability and status.",
        "operationId": "check_detector_health_health_detector_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Check Detector Health Health Detector Get"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/jobs/facebank/backfill_display": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Backfill Facebank Display",
        "description": "Regenerate missing or low-resolution facebank display derivatives.",
        "operationId": "backfill_facebank_display_jobs_jobs_facebank_backfill_display_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FacebankBackfillRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Backfill Facebank Display Jobs Jobs Facebank Backfill Display Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/detect": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Detect",
        "operationId": "enqueue_detect_jobs_detect_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Detect Jobs Detect Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/track": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Track",
        "operationId": "enqueue_track_jobs_track_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Track Jobs Track Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/detect_track": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Run Detect Track",
        "operationId": "run_detect_track_jobs_detect_track_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectTrackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/faces_embed": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Run Faces Embed",
        "operationId": "run_faces_embed_jobs_faces_embed_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FacesEmbedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/cluster": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Run Cluster",
        "operationId": "run_cluster_jobs_cluster_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClusterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/detect_track_async": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Detect Track Async",
        "operationId": "enqueue_detect_track_async_jobs_detect_track_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectTrackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Detect Track Async Jobs Detect Track Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/faces_embed_async": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Faces Embed Async",
        "operationId": "enqueue_faces_embed_async_jobs_faces_embed_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FacesEmbedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Faces Embed Async Jobs Faces Embed Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/cluster_async": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Cluster Async",
        "operationId": "enqueue_cluster_async_jobs_cluster_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClusterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Cluster Async Jobs Cluster Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/episode_cleanup_async": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Enqueue Episode Cleanup Async",
        "operationId": "enqueue_episode_cleanup_async_jobs_episode_cleanup_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CleanupJobRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Enqueue Episode Cleanup Async Jobs Episode Cleanup Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/screen_time/analyze": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Analyze Screen Time",
        "description": "Analyze per-cast screen time from assigned faces and tracks.",
        "operationId": "analyze_screen_time_jobs_screen_time_analyze_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyzeScreenTimeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Analyze Screen Time Jobs Screen Time Analyze Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs": {
      "get": {
        "tags": [
          "jobs"
        ],
        "summary": "List Jobs",
        "description": "List all jobs, optionally filtered by episode and/or job type.",
        "operationId": "list_jobs_jobs_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Ep Id"
            }
          },
          {
            "name": "job_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Job Type"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Jobs Jobs Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/{job_id}/progress": {
      "get": {
        "tags": [
          "jobs"
        ],
        "summary": "Get Job Progress",
        "operationId": "get_job_progress_jobs__job_id__progress_get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Job Progress Jobs  Job Id  Progress Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/{job_id}": {
      "get": {
        "tags": [
          "jobs"
        ],
        "summary": "Job Details",
        "operationId": "job_details_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Job Details Jobs  Job Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/jobs/{job_id}/cancel": {
      "post": {
        "tags": [
          "jobs"
        ],
        "summary": "Cancel Job",
        "operationId": "cancel_job_jobs__job_id__cancel_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Cancel Job Jobs  Job Id  Cancel Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/people": {
      "get": {
        "tags": [
          "people"
        ],
        "summary": "List People",
        "description": "Get all people for a show.",
        "operationId": "list_people_shows__show_id__people_get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List People Shows  Show Id  People Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "people"
        ],
        "summary": "Create Person",
        "description": "Create a new person.",
        "operationId": "create_person_shows__show_id__people_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonCreateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/people/{person_id}": {
      "get": {
        "tags": [
          "people"
        ],
        "summary": "Get Person",
        "description": "Get a specific person.",
        "operationId": "get_person_shows__show_id__people__person_id__get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "people"
        ],
        "summary": "Update Person",
        "description": "Update a person.",
        "operationId": "update_person_shows__show_id__people__person_id__patch",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "people"
        ],
        "summary": "Delete Person",
        "description": "Delete (archive) a person.\n\nThe person is moved to the archive where their centroid is stored.\nThis allows matching faces in future episodes to be auto-archived.",
        "operationId": "delete_person_shows__show_id__people__person_id__delete",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Delete Person Shows  Show Id  People  Person Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/people/merge": {
      "post": {
        "tags": [
          "people"
        ],
        "summary": "Merge People",
        "description": "Merge source person into target person.",
        "operationId": "merge_people_shows__show_id__people_merge_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonMergeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/shows/{show_id}/people/{person_id}/add_alias": {
      "post": {
        "tags": [
          "people"
        ],
        "summary": "Add Alias",
        "description": "Add an alias to a person.",
        "operationId": "add_alias_shows__show_id__people__person_id__add_alias_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonAddAliasRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/group": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Group Clusters",
        "description": "Group clusters either automatically or manually.\n\nAuto mode: Compute centroids, run within-episode grouping, then across-episode matching.\nManual mode: Assign specific clusters to a person (new or existing).",
        "operationId": "group_clusters_episodes__ep_id__clusters_group_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GroupClustersRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Group Clusters Episodes  Ep Id  Clusters Group Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/batch_assign": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Batch Assign Clusters",
        "description": "Batch assign multiple clusters to cast members in a single operation.\n\nThis endpoint is optimized for bulk assignments - it loads data once and\nprocesses all assignments together, significantly reducing latency compared\nto multiple individual calls.\n\nRequest body:\n    assignments: List of {cluster_id, target_cast_id} pairs\n\nReturns:\n    - status: \"success\" or \"partial\" (if some failed)\n    - results: List of assignment results\n    - succeeded: Count of successful assignments\n    - failed: Count of failed assignments",
        "operationId": "batch_assign_clusters_episodes__ep_id__clusters_batch_assign_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchAssignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Batch Assign Clusters Episodes  Ep Id  Clusters Batch Assign Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/batch_assign_async": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Batch Assign Clusters Async",
        "description": "Enqueue batch cluster assignment as background job (non-blocking).\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nIf Celery/Redis are unavailable, falls back to synchronous execution.",
        "operationId": "batch_assign_clusters_async_episodes__ep_id__clusters_batch_assign_async_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchAssignRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Batch Assign Clusters Async Episodes  Ep Id  Clusters Batch Assign Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/group_async": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Group Clusters Async",
        "description": "Enqueue auto-grouping as background job (non-blocking).\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nOnly supports strategy=\"auto\". For manual/facebank, use the synchronous endpoint.\nIf Celery/Redis are unavailable, falls back to synchronous execution.",
        "operationId": "group_clusters_async_episodes__ep_id__clusters_group_async_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GroupClustersRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Group Clusters Async Episodes  Ep Id  Clusters Group Async Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/group/progress": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Group Clusters Progress",
        "description": "Return in-flight grouping progress for polling clients.",
        "operationId": "group_clusters_progress_episodes__ep_id__clusters_group_progress_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Group Clusters Progress Episodes  Ep Id  Clusters Group Progress Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cluster_centroids": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Cluster Centroids",
        "description": "Get cluster centroids for an episode.",
        "operationId": "get_cluster_centroids_episodes__ep_id__cluster_centroids_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Cluster Centroids Episodes  Ep Id  Cluster Centroids Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cluster_centroids/compute": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Compute Cluster Centroids",
        "description": "Compute cluster centroids for an episode.",
        "operationId": "compute_cluster_centroids_episodes__ep_id__cluster_centroids_compute_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Compute Cluster Centroids Episodes  Ep Id  Cluster Centroids Compute Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cluster_suggestions": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Cluster Suggestions",
        "description": "Get suggested cast member matches for episode clusters.\n\nReturns suggestions based on similarity to existing people without actually assigning.",
        "operationId": "get_cluster_suggestions_episodes__ep_id__cluster_suggestions_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Cluster Suggestions Episodes  Ep Id  Cluster Suggestions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cluster_suggestions_from_assigned": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Cluster Suggestions From Assigned",
        "description": "Get suggested matches for unassigned clusters by comparing with assigned clusters.\n\nCompares unassigned cluster centroids against assigned cluster centroids in the same episode.\nReturns suggestions based on which assigned person has the most similar cluster.",
        "operationId": "get_cluster_suggestions_from_assigned_episodes__ep_id__cluster_suggestions_from_assigned_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Cluster Suggestions From Assigned Episodes  Ep Id  Cluster Suggestions From Assigned Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/clusters/{cluster_id}/suggest_cast": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Suggest Cast For Cluster",
        "description": "Get cast member suggestions for a specific cluster (Enhancement #6).\n\nCompares the cluster's centroid against all cast member facebank seeds.\nReturns top-k cast member suggestions with confidence levels.\n\nThis endpoint is designed for on-demand \"Suggest for Me\" button clicks.",
        "operationId": "suggest_cast_for_cluster_episodes__ep_id__clusters__cluster_id__suggest_cast_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "cluster_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Cluster Id"
            }
          },
          {
            "name": "min_similarity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.4,
              "title": "Min Similarity"
            }
          },
          {
            "name": "top_k",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 5,
              "title": "Top K"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Suggest Cast For Cluster Episodes  Ep Id  Clusters  Cluster Id  Suggest Cast Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cast_suggestions": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Cast Suggestions",
        "description": "Get cast member suggestions for unassigned clusters based on facebank similarity.\n\nCompares each unassigned cluster's centroid against all cast member facebank seeds.\nReturns top-k cast member suggestions per cluster with confidence levels.\n\nQuery params:\n    min_similarity: Minimum similarity threshold (default 0.50)\n    top_k: Number of suggestions per cluster (default 3)",
        "operationId": "get_cast_suggestions_episodes__ep_id__cast_suggestions_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "min_similarity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.5,
              "title": "Min Similarity"
            }
          },
          {
            "name": "top_k",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 3,
              "title": "Top K"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Cast Suggestions Episodes  Ep Id  Cast Suggestions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/unlinked_entities": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "List Unlinked Entities",
        "description": "Return clusters that are not linked to a cast member (auto-people + unassigned clusters).",
        "operationId": "list_unlinked_entities_episodes__ep_id__unlinked_entities_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Unlinked Entities Episodes  Ep Id  Unlinked Entities Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/auto_link_cast": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Auto Link Cast",
        "description": "Auto-assign unassigned clusters to cast members with high confidence (Enhancement #8).\n\nOnly assigns when facebank similarity is >= min_confidence.\nCalled during Refresh Values to auto-link obvious matches.",
        "operationId": "auto_link_cast_episodes__ep_id__auto_link_cast_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.85,
              "title": "Min Confidence"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Auto Link Cast Episodes  Ep Id  Auto Link Cast Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/cleanup_preview": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Cleanup Preview",
        "description": "Get a preview of what would change if cleanup were run (Enhancement #3).\n\nAnalyzes current state and estimates impact without making changes.\nReturns counts of affected clusters, manual assignments that could be impacted, etc.",
        "operationId": "cleanup_preview_episodes__ep_id__cleanup_preview_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Cleanup Preview Episodes  Ep Id  Cleanup Preview Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/backup": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Create Backup",
        "description": "Create backup before cleanup (Enhancement #7).\n\nBacks up identities.json, people.json, cluster_centroids.json.",
        "operationId": "create_backup_episodes__ep_id__backup_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Create Backup Episodes  Ep Id  Backup Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/restore/{backup_id}": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Restore Backup",
        "description": "Restore from a backup (Enhancement #7).",
        "operationId": "restore_backup_episodes__ep_id__restore__backup_id__post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "backup_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Backup Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Restore Backup Episodes  Ep Id  Restore  Backup Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/backups": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "List Backups",
        "description": "List available backups for an episode (Enhancement #7).",
        "operationId": "list_backups_episodes__ep_id__backups_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Backups Episodes  Ep Id  Backups Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/consistency_check": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Cross Episode Consistency",
        "description": "Check for cross-episode inconsistencies (Enhancement #9).\n\nFinds clusters that might be the same person but are assigned differently.",
        "operationId": "cross_episode_consistency_episodes__ep_id__consistency_check_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Cross Episode Consistency Episodes  Ep Id  Consistency Check Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/save_assignments": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Save Assignments",
        "description": "Save all current cluster assignments to people.json and identities.json.\n\nThis ensures all assignments made in the UI are persisted.",
        "operationId": "save_assignments_episodes__ep_id__save_assignments_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Save Assignments Episodes  Ep Id  Save Assignments Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/undo_stack": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Undo Stack",
        "description": "Get the undo stack for an episode.\n\nReturns list of operations that can be undone, with id, type, description, timestamp.",
        "operationId": "get_undo_stack_episodes__ep_id__undo_stack_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Undo Stack Episodes  Ep Id  Undo Stack Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/undo": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Undo Last Operation",
        "description": "Undo the last operation for an episode.\n\nRestores the state before the last undoable operation.",
        "operationId": "undo_last_operation_episodes__ep_id__undo_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Undo Last Operation Episodes  Ep Id  Undo Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/tiered_suggestions": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Tiered Suggestions",
        "description": "Get cast suggestions tiered by confidence level.\n\nReturns suggestions in three tiers:\n- high_confidence: Auto-assignable (\u226585% similarity)\n- medium_confidence: Review queue (68-85% similarity)\n- low_confidence: Manual review required (<68% similarity)",
        "operationId": "get_tiered_suggestions_episodes__ep_id__tiered_suggestions_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "high_threshold",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.85,
              "title": "High Threshold"
            }
          },
          {
            "name": "medium_threshold",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.68,
              "title": "Medium Threshold"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Tiered Suggestions Episodes  Ep Id  Tiered Suggestions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/auto_assign_high_confidence": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Auto Assign High Confidence",
        "description": "Auto-assign all high-confidence suggestions.\n\nAutomatically assigns clusters to cast members when similarity exceeds threshold.\n\nArgs:\n    threshold: Minimum similarity for auto-assignment (default 0.85)",
        "operationId": "auto_assign_high_confidence_episodes__ep_id__auto_assign_high_confidence_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "threshold",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.85,
              "title": "Threshold"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Auto Assign High Confidence Episodes  Ep Id  Auto Assign High Confidence Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/potential_duplicates": {
      "get": {
        "tags": [
          "grouping"
        ],
        "summary": "Get Potential Duplicates",
        "description": "Find clusters that might be duplicates (same person split across clusters).\n\nReturns pairs of clusters that exceed the similarity threshold.",
        "operationId": "get_potential_duplicates_episodes__ep_id__potential_duplicates_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "similarity_threshold",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.85,
              "title": "Similarity Threshold"
            }
          },
          {
            "name": "max_pairs",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Max Pairs"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Potential Duplicates Episodes  Ep Id  Potential Duplicates Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/merge_clusters": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Merge Clusters",
        "description": "Merge multiple clusters into a single person.\n\nArgs:\n    cluster_ids: List of cluster IDs to merge\n    target_person_id: Optional person ID to merge into (creates new if not provided)",
        "operationId": "merge_clusters_episodes__ep_id__merge_clusters_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MergeClustersRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Merge Clusters Episodes  Ep Id  Merge Clusters Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/episodes/{ep_id}/merge_all_duplicates": {
      "post": {
        "tags": [
          "grouping"
        ],
        "summary": "Merge All Duplicates",
        "description": "Automatically merge all high-similarity cluster pairs.\n\nUses transitive closure to group connected clusters before merging.\n\nArgs:\n    similarity_threshold: Minimum similarity for auto-merge (default 0.90)",
        "operationId": "merge_all_duplicates_episodes__ep_id__merge_all_duplicates_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MergeAllRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Merge All Duplicates Episodes  Ep Id  Merge All Duplicates Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/metadata/shows/{show_slug}": {
      "get": {
        "tags": [
          "metadata"
        ],
        "summary": "Read Show",
        "description": "Return show metadata from core.shows.\n\nArgs:\n    show_slug: Show identifier (e.g., 'RHOBH', 'RHOSLC')\n\nReturns:\n    JSON object with show fields:\n    - show_id: Primary key\n    - show_slug: Show identifier\n    - title: Display name\n    - franchise: Franchise name (nullable)\n    - network: Network name (nullable)\n    - imdb_series_id: IMDb series ID (nullable)\n    - tmdb_series_id: TMDb series ID (nullable)\n    - is_active: Whether show is currently active\n\nRaises:\n    HTTPException: 404 if show not found\n    HTTPException: 500 if database connection or query fails",
        "operationId": "read_show_metadata_shows__show_slug__get",
        "parameters": [
          {
            "name": "show_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/metadata/shows/{show_slug}/seasons": {
      "get": {
        "tags": [
          "metadata"
        ],
        "summary": "Read Show Seasons",
        "description": "Return seasons for a show from core.seasons.\n\nArgs:\n    show_slug: Show identifier (e.g., 'RHOBH', 'RHOSLC')\n\nReturns:\n    JSON object with:\n    - show: Show metadata object\n    - seasons: Array of season objects with fields:\n      - season_id: Primary key\n      - show_id: Foreign key to show\n      - season_number: Season number\n      - label: Display label (nullable)\n      - is_current: Whether this is the current season\n\nRaises:\n    HTTPException: 404 if show not found\n    HTTPException: 500 if database connection or query fails",
        "operationId": "read_show_seasons_metadata_shows__show_slug__seasons_get",
        "parameters": [
          {
            "name": "show_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/metadata/shows/{show_slug}/episodes": {
      "get": {
        "tags": [
          "metadata"
        ],
        "summary": "Read Show Episodes",
        "description": "Return episodes for a show from core.episodes.\n\nArgs:\n    show_slug: Show identifier (e.g., 'RHOBH', 'RHOSLC')\n\nReturns:\n    JSON object with:\n    - show: Show metadata object\n    - episodes: Array of episode objects with fields:\n      - episode_id: Primary key\n      - season_id: Foreign key to season\n      - season_number: Season number (from join)\n      - episode_number: Episode number within season\n      - episode_code: Episode code (nullable, e.g. \"S01E01\")\n      - title: Episode title (nullable)\n      - air_date: Air date (nullable)\n      - runtime_seconds: Runtime in seconds (nullable)\n\nRaises:\n    HTTPException: 404 if show not found\n    HTTPException: 500 if database connection or query fails",
        "operationId": "read_show_episodes_metadata_shows__show_slug__episodes_get",
        "parameters": [
          {
            "name": "show_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/metadata/shows/{show_slug}/cast": {
      "get": {
        "tags": [
          "metadata"
        ],
        "summary": "Read Show Cast",
        "description": "Return the canonical cast list for a given show slug from core.cast.\n\nArgs:\n    show_slug: Show identifier (e.g., 'RHOBH', 'RHOSLC')\n\nReturns:\n    JSON array of cast member records with fields:\n    - cast_id: Primary key (text or UUID)\n    - show_slug: Show identifier\n    - person_name: Cast member's name\n    - imdb_person_id: IMDb person ID (nullable)\n    - tmdb_person_id: TMDb person ID (nullable)\n    - bravo_cast_slug: Stable UI slug (nullable)\n    - sort_order: Display order hint (nullable)\n\nRaises:\n    HTTPException: 404 if no cast found for the show\n    HTTPException: 500 if database connection or query fails",
        "operationId": "read_show_cast_metadata_shows__show_slug__cast_get",
        "parameters": [
          {
            "name": "show_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}": {
      "get": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "List Archived Items",
        "description": "List archived items for a show.\n\nReturns paginated list of archived people, clusters, and tracks.",
        "operationId": "list_archived_items_archive_shows__show_id__get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "item_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter: person, cluster, track",
              "title": "Item Type"
            },
            "description": "Filter: person, cluster, track"
          },
          {
            "name": "episode_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by episode",
              "title": "Episode Id"
            },
            "description": "Filter by episode"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response List Archived Items Archive Shows  Show Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/stats": {
      "get": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Get Archive Stats",
        "description": "Get archive statistics for a show.",
        "operationId": "get_archive_stats_archive_shows__show_id__stats_get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Archive Stats Archive Shows  Show Id  Stats Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/match": {
      "post": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Find Matching Archived",
        "description": "Find archived items matching a given face centroid.\n\nUsed to check if a new face matches previously archived (rejected) faces.",
        "operationId": "find_matching_archived_archive_shows__show_id__match_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MatchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Find Matching Archived Archive Shows  Show Id  Match Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/restore/{archive_id}": {
      "post": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Restore Archived Item",
        "description": "Restore an archived person.\n\nReturns the original person data. The caller should use this\nto recreate the person via the people API.",
        "operationId": "restore_archived_item_archive_shows__show_id__restore__archive_id__post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "archive_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Archive Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Restore Archived Item Archive Shows  Show Id  Restore  Archive Id  Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/{archive_id}": {
      "delete": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Permanently Delete Archived",
        "description": "Permanently delete an archived item.\n\nThis cannot be undone - the item and its centroid will be gone forever.",
        "operationId": "permanently_delete_archived_archive_shows__show_id___archive_id__delete",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "archive_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Archive Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Permanently Delete Archived Archive Shows  Show Id   Archive Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/centroids": {
      "get": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Get Archived Centroids",
        "description": "Get all archived centroids for matching.\n\nReturns list of archived items with their centroid embeddings.\nUsed for auto-archiving matching faces in future episodes.",
        "operationId": "get_archived_centroids_archive_shows__show_id__centroids_get",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          },
          {
            "name": "item_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter: person, cluster, track",
              "title": "Item Type"
            },
            "description": "Filter: person, cluster, track"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Archived Centroids Archive Shows  Show Id  Centroids Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/archive/shows/{show_id}/tracks": {
      "post": {
        "tags": [
          "archive",
          "archive"
        ],
        "summary": "Archive Track",
        "description": "Archive a track before deletion.\n\nStores the track metadata for potential future matching or restoration.",
        "operationId": "archive_track_archive_shows__show_id__tracks_post",
        "parameters": [
          {
            "name": "show_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Show Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArchiveTrackRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Archive Track Archive Shows  Show Id  Tracks Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/local": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "List Local Jobs",
        "description": "List running local jobs (not Celery).\n\nThese are subprocess jobs running on the local machine, detected either\nfrom our registry or by scanning for episode_run.py processes.\n\nArgs:\n    ep_id: Optional filter by episode ID",
        "operationId": "list_local_jobs_celery_jobs_local_get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/logs/{ep_id}/{operation}": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Get Operation Logs",
        "description": "Get the most recent logs for an operation.\n\nThis endpoint returns the last saved logs for a given episode and operation.\nLogs are persisted when local mode jobs complete (success, error, or cancelled).\n\nArgs:\n    ep_id: Episode identifier\n    operation: Operation name (detect_track, faces_embed, cluster)\n\nReturns:\n    - status: \"completed\" | \"error\" | \"cancelled\" | \"timeout\" | \"none\"\n    - logs: List of log lines (empty if status is \"none\")\n    - elapsed_seconds: Runtime in seconds\n    - updated_at: ISO timestamp of when logs were saved",
        "operationId": "get_operation_logs_celery_jobs_logs__ep_id___operation__get",
        "parameters": [
          {
            "name": "ep_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Ep Id"
            }
          },
          {
            "name": "operation",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Operation"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/{job_id}": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Get Celery Job Status",
        "description": "Get status of a Celery background job.\n\nThis endpoint returns status of jobs submitted via Redis/Celery mode.\nLocal mode jobs are synchronous and do not use this endpoint.\n\nReturns:\n    - job_id: The job ID\n    - state: Simplified state (queued, in_progress, success, failed, cancelled)\n    - raw_state: Original Celery state\n    - result: Job result if completed (success or failure)\n    - progress: Progress metadata if job is running",
        "operationId": "get_celery_job_status_celery_jobs__job_id__get",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/{job_id}/cancel": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Cancel Celery Job",
        "description": "Cancel a running Celery or local background job.\n\nSupports:\n- Celery jobs: Sends revoke signal\n- Local jobs (orphan-{pid}, local-{ep_id}-{operation}): Kills process by PID\n\nNote: This sends a termination signal. Long-running operations may take\na moment to actually stop.",
        "operationId": "cancel_celery_job_celery_jobs__job_id__cancel_post",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/kill_all_local": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Kill All Local Jobs",
        "description": "Kill all local/orphan jobs, optionally filtered by episode.\n\nThis is useful for cleaning up stale processes that weren't properly\nterminated (e.g., after a crash or page refresh).\n\nArgs:\n    ep_id: Optional episode ID to filter jobs. If not provided, kills all local jobs.\n\nReturns:\n    List of killed job IDs and their status.",
        "operationId": "kill_all_local_jobs_celery_jobs_kill_all_local_post",
        "parameters": [
          {
            "name": "ep_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Ep Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "List Active Celery Jobs",
        "description": "List currently active Celery jobs.\n\nNote: This only shows jobs known to the current worker.\nCompleted jobs are available via their individual job_id.\n\nEach job now includes ep_id and operation for matching after page reload.",
        "operationId": "list_active_celery_jobs_celery_jobs_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/celery_jobs/detect_track": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Start Detect Track Celery",
        "description": "Start a detect/track job.\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nThermal Safety:\n    - Resolves profile based on device (low_power for CPU/CoreML/MPS)\n    - Auto-downgrades \"performance\" profile on non-CUDA devices\n    - Always applies CPU thread limits (default: 2 for laptops)\n\nCheck for active jobs before starting to prevent duplicate runs.",
        "operationId": "start_detect_track_celery_celery_jobs_detect_track_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectTrackCeleryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/faces_embed": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Start Faces Embed Celery",
        "description": "Start a faces embed (harvest) job.\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nThermal Safety:\n    - Applies CPU thread limits for laptop-friendly operation",
        "operationId": "start_faces_embed_celery_celery_jobs_faces_embed_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FacesEmbedCeleryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/cluster": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Start Cluster Celery",
        "description": "Start a clustering job.\n\nExecution Mode:\n    - execution_mode=\"redis\" (default): Enqueues job via Celery, returns 202 with job_id\n    - execution_mode=\"local\": Runs job synchronously in-process, returns result when done\n\nThermal Safety:\n    - Applies CPU thread limits for laptop-friendly operation",
        "operationId": "start_cluster_celery_celery_jobs_cluster_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClusterCeleryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/parallel": {
      "post": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Start Parallel Jobs",
        "description": "Start the same operation on multiple episodes in parallel.\n\nUses Celery group to execute jobs concurrently across episodes.\nReturns a group_id that can be used to track overall progress.\n\nArgs:\n    episode_ids: List of episode IDs to process\n    operation: Operation to run (auto_group, refresh_similarity, manual_assign)\n    options: Options to pass to each task\n\nReturns:\n    - group_id: ID to track the parallel job group\n    - job_ids: Map of episode_id to individual job_id\n    - status: \"queued\" or \"error\"",
        "operationId": "start_parallel_jobs_celery_jobs_parallel_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ParallelJobRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/parallel/{group_id}": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Get Parallel Job Status",
        "description": "Get status of a parallel job group.\n\nReturns overall progress and per-episode results.\n\nArgs:\n    group_id: The group ID returned from /parallel endpoint\n\nReturns:\n    - status: overall status (in_progress, success, partial_success, failed)\n    - progress: fraction complete (0.0 to 1.0)\n    - completed: number of completed jobs\n    - failed: number of failed jobs\n    - results: per-episode job status",
        "operationId": "get_parallel_job_status_celery_jobs_parallel__group_id__get",
        "parameters": [
          {
            "name": "group_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Group Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/history": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Get Job History Endpoint",
        "description": "Get job history for a user.\n\nReturns list of recent jobs with status and timing information.\n\nArgs:\n    user_id: User identifier (defaults to \"anonymous\")\n    limit: Maximum number of records (default 20)\n    offset: Number of records to skip (for pagination)\n\nReturns:\n    List of job records, newest first",
        "operationId": "get_job_history_endpoint_celery_jobs_history_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/celery_jobs/active": {
      "get": {
        "tags": [
          "celery_jobs",
          "celery_jobs"
        ],
        "summary": "Get Active Jobs Endpoint",
        "description": "Get all active (queued/in_progress) jobs for a user.\n\nThis is useful for the \"My Jobs\" panel to show what's currently running.\n\nArgs:\n    user_id: User identifier (defaults to \"anonymous\")\n\nReturns:\n    List of active job records with current status",
        "operationId": "get_active_jobs_endpoint_celery_jobs_active_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Health Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/healthz": {
      "get": {
        "summary": "Healthz",
        "description": "Lightweight health check - must not block on heavy imports or GIL-holding operations.",
        "operationId": "healthz_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnalyzeScreenTimeRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "quality_min": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Quality Min",
            "description": "Minimum face quality threshold"
          },
          "gap_tolerance_s": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Gap Tolerance S",
            "description": "Gap tolerance in seconds"
          },
          "use_video_decode": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Use Video Decode",
            "description": "Use video decode for precise timestamps"
          },
          "screen_time_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "faces",
                  "tracks"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Screen Time Mode",
            "description": "How to derive intervals for screen time aggregation"
          },
          "edge_padding_s": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Edge Padding S",
            "description": "Edge padding (seconds) applied to each interval"
          },
          "track_coverage_min": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Track Coverage Min",
            "description": "Minimum detection coverage when using track mode"
          },
          "preset": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preset",
            "description": "Named preset defined in config/pipeline/screen_time_v2.yaml"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "AnalyzeScreenTimeRequest"
      },
      "ArchiveTrackRequest": {
        "properties": {
          "episode_id": {
            "type": "string",
            "title": "Episode Id",
            "description": "Episode ID"
          },
          "track_id": {
            "type": "integer",
            "title": "Track Id",
            "description": "Track ID"
          },
          "reason": {
            "type": "string",
            "title": "Reason",
            "description": "Reason for archiving",
            "default": "user_archived"
          },
          "cluster_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cluster Id",
            "description": "Parent cluster ID"
          },
          "centroid": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Centroid",
            "description": "Track centroid embedding"
          },
          "rep_crop_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rep Crop Url",
            "description": "Representative crop URL"
          },
          "frame_count": {
            "type": "integer",
            "title": "Frame Count",
            "description": "Number of frames in this track",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "episode_id",
          "track_id"
        ],
        "title": "ArchiveTrackRequest",
        "description": "Request to archive a track."
      },
      "AssetUploadResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "method": {
            "type": "string",
            "title": "Method"
          },
          "bucket": {
            "type": "string",
            "title": "Bucket"
          },
          "key": {
            "type": "string",
            "title": "Key"
          },
          "object_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Object Key"
          },
          "upload_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Upload Url"
          },
          "expires_in": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires In"
          },
          "headers": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Headers"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "local_video_path": {
            "type": "string",
            "title": "Local Video Path"
          },
          "backend": {
            "type": "string",
            "title": "Backend"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "method",
          "bucket",
          "key",
          "upload_url",
          "expires_in",
          "headers",
          "local_video_path",
          "backend"
        ],
        "title": "AssetUploadResponse"
      },
      "BatchAssignRequest": {
        "properties": {
          "assignments": {
            "items": {
              "$ref": "#/components/schemas/BatchAssignmentItem"
            },
            "type": "array",
            "title": "Assignments",
            "description": "List of cluster-to-cast assignments"
          },
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "required": [
          "assignments"
        ],
        "title": "BatchAssignRequest",
        "description": "Batch assignment request for multiple clusters to multiple cast members."
      },
      "BatchAssignmentItem": {
        "properties": {
          "cluster_id": {
            "type": "string",
            "title": "Cluster Id",
            "description": "Cluster ID to assign"
          },
          "target_cast_id": {
            "type": "string",
            "title": "Target Cast Id",
            "description": "Cast ID to assign the cluster to"
          }
        },
        "type": "object",
        "required": [
          "cluster_id",
          "target_cast_id"
        ],
        "title": "BatchAssignmentItem",
        "description": "Single assignment in a batch."
      },
      "Body_upload_seeds_cast__cast_id__seeds_upload_post": {
        "properties": {
          "files": {
            "items": {
              "type": "string",
              "format": "binary"
            },
            "type": "array",
            "title": "Files"
          }
        },
        "type": "object",
        "required": [
          "files"
        ],
        "title": "Body_upload_seeds_cast__cast_id__seeds_upload_post"
      },
      "BulkImportRequest": {
        "properties": {
          "members": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Members",
            "description": "List of cast member data"
          },
          "force_new": {
            "type": "boolean",
            "title": "Force New",
            "description": "Always create new members (skip merge by name)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "members"
        ],
        "title": "BulkImportRequest"
      },
      "BulkTrackAssignRequest": {
        "properties": {
          "track_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "minItems": 1,
            "title": "Track Ids",
            "description": "List of track IDs to assign"
          },
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name",
            "description": "Name to assign"
          },
          "show": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show",
            "description": "Optional show slug override"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id",
            "description": "Optional cast_id to link assignment"
          }
        },
        "type": "object",
        "required": [
          "track_ids",
          "name"
        ],
        "title": "BulkTrackAssignRequest"
      },
      "CastMemberCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Cast member name"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name",
            "description": "Legal/full name"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "Role: main, friend, guest, other",
            "default": "other"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status: active, past, inactive",
            "default": "active"
          },
          "aliases": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aliases",
            "description": "Aliases/nicknames"
          },
          "seasons": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Seasons",
            "description": "Season IDs (e.g., S05)"
          },
          "social": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Social",
            "description": "Social media handles"
          },
          "imdb_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Id",
            "description": "IMDb person identifier (e.g., nm0000001)"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "CastMemberCreateRequest"
      },
      "CastMemberResponse": {
        "properties": {
          "cast_id": {
            "type": "string",
            "title": "Cast Id"
          },
          "show_id": {
            "type": "string",
            "title": "Show Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "aliases": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Aliases"
          },
          "seasons": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Seasons"
          },
          "social": {
            "type": "object",
            "title": "Social"
          },
          "imdb_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Id"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "cast_id",
          "show_id",
          "name",
          "role",
          "status",
          "aliases",
          "seasons",
          "social",
          "created_at",
          "updated_at"
        ],
        "title": "CastMemberResponse"
      },
      "CastMemberUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "role": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Role"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "aliases": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aliases"
          },
          "seasons": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Seasons"
          },
          "social": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Social"
          },
          "imdb_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Id"
          }
        },
        "type": "object",
        "title": "CastMemberUpdateRequest"
      },
      "CastNameRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "CastNameRequest"
      },
      "CleanupJobRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "fast_cpu",
                  "low_power",
                  "balanced",
                  "high_accuracy"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile (fast_cpu/low_power/balanced/high_accuracy). Applies to all cleanup stages."
          },
          "stride": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Stride",
            "default": 4
          },
          "fps": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Detect/track device (auto\u2192CUDA\u2192CoreML\u2192CPU)",
            "default": "auto"
          },
          "embed_device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Embed Device",
            "description": "Faces embed device (supports coreml/metal/apple alias)",
            "default": "auto"
          },
          "detector": {
            "type": "string",
            "title": "Detector",
            "description": "Detector backend (retinaface)",
            "default": "retinaface"
          },
          "tracker": {
            "type": "string",
            "title": "Tracker",
            "description": "Tracker backend",
            "default": "bytetrack"
          },
          "max_gap": {
            "type": "integer",
            "maximum": 240.0,
            "minimum": 1.0,
            "title": "Max Gap",
            "default": 30
          },
          "det_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Det Thresh"
          },
          "save_frames": {
            "type": "boolean",
            "title": "Save Frames",
            "default": false
          },
          "save_crops": {
            "type": "boolean",
            "title": "Save Crops",
            "default": false
          },
          "jpeg_quality": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 50.0,
            "title": "Jpeg Quality",
            "default": 72
          },
          "scene_detector": {
            "type": "string",
            "enum": [
              "pyscenedetect",
              "internal",
              "off"
            ],
            "title": "Scene Detector",
            "default": "pyscenedetect"
          },
          "scene_threshold": {
            "type": "number",
            "minimum": 0.0,
            "title": "Scene Threshold",
            "default": 27.0
          },
          "scene_min_len": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Scene Min Len",
            "default": 12
          },
          "scene_warmup_dets": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Scene Warmup Dets",
            "default": 3
          },
          "cluster_thresh": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.2,
            "title": "Cluster Thresh",
            "default": 0.7
          },
          "min_cluster_size": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Min Cluster Size",
            "default": 2
          },
          "min_identity_sim": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.0,
            "title": "Min Identity Sim",
            "default": 0.5
          },
          "thumb_size": {
            "type": "integer",
            "maximum": 512.0,
            "minimum": 64.0,
            "title": "Thumb Size",
            "default": 256
          },
          "actions": {
            "items": {
              "type": "string",
              "enum": [
                "split_tracks",
                "reembed",
                "recluster",
                "group_clusters"
              ]
            },
            "type": "array",
            "title": "Actions"
          },
          "write_back": {
            "type": "boolean",
            "title": "Write Back",
            "description": "Update people.json with grouping assignments",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "CleanupJobRequest"
      },
      "ClusterCeleryRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Execution device",
            "default": "auto"
          },
          "cluster_thresh": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.2,
            "title": "Cluster Thresh",
            "description": "Clustering threshold",
            "default": 0.7
          },
          "min_cluster_size": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Min Cluster Size",
            "description": "Minimum cluster size",
            "default": 2
          },
          "min_identity_sim": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 0.99,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Identity Sim",
            "description": "Min identity similarity",
            "default": 0.5
          },
          "cpu_threads": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 16.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Threads",
            "description": "CPU thread cap"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile"
          },
          "allow_cpu_fallback": {
            "type": "boolean",
            "title": "Allow Cpu Fallback",
            "description": "Allow falling back to CPU if requested accelerator is unavailable.",
            "default": false
          },
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "ClusterCeleryRequest",
        "description": "Request model for Celery-based cluster job."
      },
      "ClusterRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "fast_cpu",
                  "low_power",
                  "balanced",
                  "high_accuracy"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile (fast_cpu/low_power/balanced/high_accuracy). Controls clustering thresholds."
          },
          "device": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "auto",
                  "cpu",
                  "mps",
                  "coreml",
                  "metal",
                  "apple",
                  "cuda"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Device",
            "description": "Execution device (defaults to server auto-detect with CUDA/CoreML fallbacks)"
          },
          "cluster_thresh": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.2,
            "title": "Cluster Thresh",
            "description": "Minimum cosine similarity for clustering (converted to 1-sim distance)",
            "default": 0.7
          },
          "min_cluster_size": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Min Cluster Size",
            "description": "Minimum tracks per identity",
            "default": 2
          },
          "min_identity_sim": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.0,
            "title": "Min Identity Sim",
            "description": "Minimum cosine similarity for a track to remain in an identity cluster",
            "default": 0.5
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "ClusterRequest"
      },
      "DeleteAllIn": {
        "properties": {
          "confirm": {
            "type": "string",
            "title": "Confirm"
          },
          "include_s3": {
            "type": "boolean",
            "title": "Include S3",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "confirm"
        ],
        "title": "DeleteAllIn"
      },
      "DeleteEpisodeIn": {
        "properties": {
          "include_s3": {
            "type": "boolean",
            "title": "Include S3",
            "default": true
          },
          "delete_raw": {
            "type": "boolean",
            "title": "Delete Raw",
            "default": false
          },
          "delete_local": {
            "type": "boolean",
            "title": "Delete Local",
            "default": true
          }
        },
        "type": "object",
        "title": "DeleteEpisodeIn"
      },
      "DeleteEpisodeLegacyIn": {
        "properties": {
          "delete_artifacts": {
            "type": "boolean",
            "title": "Delete Artifacts",
            "default": true
          },
          "delete_raw": {
            "type": "boolean",
            "title": "Delete Raw",
            "default": false
          },
          "delete_local": {
            "type": "boolean",
            "title": "Delete Local",
            "default": true
          }
        },
        "type": "object",
        "title": "DeleteEpisodeLegacyIn"
      },
      "DeleteSeedsRequest": {
        "properties": {
          "seed_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Seed Ids",
            "description": "List of seed IDs to delete"
          }
        },
        "type": "object",
        "required": [
          "seed_ids"
        ],
        "title": "DeleteSeedsRequest"
      },
      "DetectRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "video": {
            "type": "string",
            "title": "Video",
            "description": "Source video path or URL"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "fast_cpu",
                  "low_power",
                  "balanced",
                  "high_accuracy"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile (fast_cpu/low_power/balanced/high_accuracy). Overrides stride/FPS/min_size defaults."
          },
          "stride": {
            "type": "integer",
            "title": "Stride",
            "description": "Frame stride for detection sampling (default 4 aligns with detect+track 42-minute runs)",
            "default": 4
          },
          "fps": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps",
            "description": "Optional target FPS for sampling"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Execution device (auto\u2192CUDA\u2192CoreML\u2192CPU; accepts coreml/metal/apple aliases)",
            "default": "auto"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "video"
        ],
        "title": "DetectRequest"
      },
      "DetectTrackCeleryRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "stride": {
            "type": "integer",
            "title": "Stride",
            "description": "Frame stride for detection sampling",
            "default": 6
          },
          "fps": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps",
            "description": "Optional target FPS for sampling"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Execution device",
            "default": "auto"
          },
          "detector": {
            "type": "string",
            "title": "Detector",
            "description": "Face detector backend",
            "default": "retinaface"
          },
          "tracker": {
            "type": "string",
            "title": "Tracker",
            "description": "Tracker backend",
            "default": "bytetrack"
          },
          "save_frames": {
            "type": "boolean",
            "title": "Save Frames",
            "description": "Save sampled frames",
            "default": false
          },
          "save_crops": {
            "type": "boolean",
            "title": "Save Crops",
            "description": "Save face crops",
            "default": false
          },
          "jpeg_quality": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Jpeg Quality",
            "description": "JPEG quality",
            "default": 72
          },
          "det_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Det Thresh",
            "description": "Detection threshold",
            "default": 0.5
          },
          "max_gap": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Gap",
            "description": "Max frame gap before new track",
            "default": 30
          },
          "scene_detector": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Detector",
            "description": "Scene detector backend"
          },
          "scene_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Threshold",
            "description": "Scene cut threshold"
          },
          "scene_min_len": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Min Len",
            "description": "Minimum frames between scene cuts"
          },
          "scene_warmup_dets": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Warmup Dets",
            "description": "Forced detections after each cut"
          },
          "track_high_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Track High Thresh",
            "description": "ByteTrack track_high_thresh override"
          },
          "new_track_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "New Track Thresh",
            "description": "ByteTrack new_track_thresh override"
          },
          "track_buffer": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Track Buffer",
            "description": "ByteTrack base track_buffer before stride scaling"
          },
          "min_box_area": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Box Area",
            "description": "ByteTrack min_box_area override"
          },
          "cpu_threads": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 16.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Threads",
            "description": "CPU thread cap for detect/track run"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile"
          },
          "allow_cpu_fallback": {
            "type": "boolean",
            "title": "Allow Cpu Fallback",
            "description": "Allow falling back to CPU if requested accelerator (coreml/cuda) is unavailable. If False (default), fails fast with an error when accelerator is unavailable.",
            "default": false
          },
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "DetectTrackCeleryRequest",
        "description": "Request model for Celery-based detect/track job."
      },
      "DetectTrackRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "fast_cpu",
                  "low_power",
                  "balanced",
                  "high_accuracy"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile (fast_cpu/low_power/balanced/high_accuracy). Overrides stride/FPS/min_size defaults."
          },
          "stride": {
            "type": "integer",
            "title": "Stride",
            "description": "Frame stride for detection sampling (default: 6)",
            "default": 6
          },
          "fps": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps",
            "description": "Optional target FPS for sampling"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Execution device (auto\u2192CUDA\u2192CoreML\u2192CPU; accepts coreml/metal/apple aliases)",
            "default": "auto"
          },
          "save_frames": {
            "type": "boolean",
            "title": "Save Frames",
            "description": "Sample full-frame JPGs to S3/local frames root",
            "default": false
          },
          "save_crops": {
            "type": "boolean",
            "title": "Save Crops",
            "description": "Save per-track crops (requires tracks)",
            "default": false
          },
          "jpeg_quality": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Jpeg Quality",
            "description": "JPEG quality for frame/crop exports",
            "default": 72
          },
          "detector": {
            "type": "string",
            "title": "Detector",
            "description": "Face detector backend (retinaface)",
            "default": "retinaface"
          },
          "tracker": {
            "type": "string",
            "title": "Tracker",
            "description": "Tracker backend (bytetrack or strongsort)",
            "default": "bytetrack"
          },
          "max_gap": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Gap",
            "description": "Frame gap before forcing a new track",
            "default": 30
          },
          "det_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Det Thresh",
            "description": "RetinaFace detection threshold (0-1)",
            "default": 0.5
          },
          "scene_detector": {
            "type": "string",
            "enum": [
              "pyscenedetect",
              "internal",
              "off"
            ],
            "title": "Scene Detector",
            "description": "Scene-cut detector backend (PySceneDetect default, internal fallback, or off)",
            "default": "pyscenedetect"
          },
          "scene_threshold": {
            "type": "number",
            "minimum": 0.0,
            "title": "Scene Threshold",
            "description": "Scene-cut threshold passed to the selected detector",
            "default": 27.0
          },
          "scene_min_len": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Scene Min Len",
            "description": "Minimum frames between detected cuts",
            "default": 12
          },
          "scene_warmup_dets": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Scene Warmup Dets",
            "description": "Frames forced to run detection immediately after a cut",
            "default": 3
          },
          "track_high_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Track High Thresh",
            "description": "Optional ByteTrack track_high_thresh override (default 0.5 or env)"
          },
          "new_track_thresh": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "New Track Thresh",
            "description": "Optional ByteTrack new_track_thresh override (default 0.5 or env)"
          },
          "track_buffer": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Track Buffer",
            "description": "Optional ByteTrack base track_buffer before stride scaling"
          },
          "min_box_area": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Box Area",
            "description": "Optional ByteTrack min_box_area override"
          },
          "cpu_threads": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 16.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Threads",
            "description": "CPU thread limit for ML libraries (OMP, MKL, etc.)"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "DetectTrackRequest"
      },
      "DropFrameRequest": {
        "properties": {
          "track_id": {
            "type": "integer",
            "title": "Track Id"
          },
          "frame_idx": {
            "type": "integer",
            "title": "Frame Idx"
          },
          "delete_assets": {
            "type": "boolean",
            "title": "Delete Assets",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "track_id",
          "frame_idx"
        ],
        "title": "DropFrameRequest"
      },
      "DropTrackRequest": {
        "properties": {
          "track_id": {
            "type": "integer",
            "title": "Track Id"
          }
        },
        "type": "object",
        "required": [
          "track_id"
        ],
        "title": "DropTrackRequest"
      },
      "EpisodeCreateRequest": {
        "properties": {
          "show_slug_or_id": {
            "type": "string",
            "minLength": 1,
            "title": "Show Slug Or Id",
            "description": "Show slug or identifier"
          },
          "season_number": {
            "type": "integer",
            "maximum": 999.0,
            "minimum": 0.0,
            "title": "Season Number",
            "description": "Season number"
          },
          "episode_number": {
            "type": "integer",
            "maximum": 999.0,
            "minimum": 0.0,
            "title": "Episode Number",
            "description": "Episode number within the season"
          },
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "air_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Air Date"
          }
        },
        "type": "object",
        "required": [
          "show_slug_or_id",
          "season_number",
          "episode_number"
        ],
        "title": "EpisodeCreateRequest"
      },
      "EpisodeCreateResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "EpisodeCreateResponse"
      },
      "EpisodeDetailResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "show_slug": {
            "type": "string",
            "title": "Show Slug"
          },
          "season_number": {
            "type": "integer",
            "title": "Season Number"
          },
          "episode_number": {
            "type": "integer",
            "title": "Episode Number"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "air_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Air Date"
          },
          "s3": {
            "$ref": "#/components/schemas/EpisodeS3Status"
          },
          "local": {
            "$ref": "#/components/schemas/EpisodeLocalStatus"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "show_slug",
          "season_number",
          "episode_number",
          "title",
          "air_date",
          "s3",
          "local"
        ],
        "title": "EpisodeDetailResponse"
      },
      "EpisodeListResponse": {
        "properties": {
          "episodes": {
            "items": {
              "$ref": "#/components/schemas/EpisodeSummary"
            },
            "type": "array",
            "title": "Episodes"
          }
        },
        "type": "object",
        "required": [
          "episodes"
        ],
        "title": "EpisodeListResponse"
      },
      "EpisodeLocalStatus": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "exists": {
            "type": "boolean",
            "title": "Exists"
          }
        },
        "type": "object",
        "required": [
          "path",
          "exists"
        ],
        "title": "EpisodeLocalStatus"
      },
      "EpisodeMirrorResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "local_video_path": {
            "type": "string",
            "title": "Local Video Path"
          },
          "bytes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bytes"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "used_key_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Used Key Version"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "local_video_path"
        ],
        "title": "EpisodeMirrorResponse"
      },
      "EpisodeS3Status": {
        "properties": {
          "bucket": {
            "type": "string",
            "title": "Bucket"
          },
          "v2_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "V2 Key"
          },
          "v2_exists": {
            "type": "boolean",
            "title": "V2 Exists",
            "default": false
          },
          "v1_key": {
            "type": "string",
            "title": "V1 Key"
          },
          "v1_exists": {
            "type": "boolean",
            "title": "V1 Exists"
          }
        },
        "type": "object",
        "required": [
          "bucket",
          "v1_key",
          "v1_exists"
        ],
        "title": "EpisodeS3Status"
      },
      "EpisodeStatusResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "detect_track": {
            "$ref": "#/components/schemas/PhaseStatus"
          },
          "faces_embed": {
            "$ref": "#/components/schemas/PhaseStatus"
          },
          "cluster": {
            "$ref": "#/components/schemas/PhaseStatus"
          },
          "scenes_ready": {
            "type": "boolean",
            "title": "Scenes Ready"
          },
          "tracks_ready": {
            "type": "boolean",
            "title": "Tracks Ready"
          },
          "faces_harvested": {
            "type": "boolean",
            "title": "Faces Harvested"
          },
          "coreml_available": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Coreml Available"
          },
          "faces_stale": {
            "type": "boolean",
            "title": "Faces Stale",
            "default": false
          },
          "cluster_stale": {
            "type": "boolean",
            "title": "Cluster Stale",
            "default": false
          },
          "faces_manifest_fallback": {
            "type": "boolean",
            "title": "Faces Manifest Fallback",
            "default": false
          },
          "tracks_only_fallback": {
            "type": "boolean",
            "title": "Tracks Only Fallback",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "detect_track",
          "faces_embed",
          "cluster",
          "scenes_ready",
          "tracks_ready",
          "faces_harvested"
        ],
        "title": "EpisodeStatusResponse"
      },
      "EpisodeSummary": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "show_slug": {
            "type": "string",
            "title": "Show Slug"
          },
          "season_number": {
            "type": "integer",
            "title": "Season Number"
          },
          "episode_number": {
            "type": "integer",
            "title": "Episode Number"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "air_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Air Date"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "show_slug",
          "season_number",
          "episode_number",
          "title",
          "air_date"
        ],
        "title": "EpisodeSummary"
      },
      "EpisodeUpsert": {
        "properties": {
          "ep_id": {
            "type": "string",
            "minLength": 3,
            "title": "Ep Id",
            "description": "Deterministic ep_id (slug-sXXeYY)"
          },
          "show_slug": {
            "type": "string",
            "minLength": 1,
            "title": "Show Slug"
          },
          "season": {
            "type": "integer",
            "maximum": 999.0,
            "minimum": 0.0,
            "title": "Season"
          },
          "episode": {
            "type": "integer",
            "maximum": 999.0,
            "minimum": 0.0,
            "title": "Episode"
          },
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "air_date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Air Date"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "show_slug",
          "season",
          "episode"
        ],
        "title": "EpisodeUpsert"
      },
      "EpisodeVideoMeta": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "local_exists": {
            "type": "boolean",
            "title": "Local Exists"
          },
          "local_video_path": {
            "type": "string",
            "title": "Local Video Path"
          },
          "width": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Width"
          },
          "height": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Height"
          },
          "frames": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Frames"
          },
          "duration_sec": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Sec"
          },
          "fps_detected": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps Detected"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "local_exists",
          "local_video_path"
        ],
        "title": "EpisodeVideoMeta"
      },
      "FaceMoveRequest": {
        "properties": {
          "from_track_id": {
            "type": "integer",
            "minimum": 0.0,
            "title": "From Track Id"
          },
          "face_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Face Ids",
            "description": "Face identifiers to move"
          },
          "target_identity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Identity Id",
            "description": "Existing identity to receive frames"
          },
          "new_identity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Identity Name",
            "description": "Create a new identity with this name"
          },
          "show_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show Id",
            "description": "Optional show slug for roster updates"
          }
        },
        "type": "object",
        "required": [
          "from_track_id",
          "face_ids"
        ],
        "title": "FaceMoveRequest"
      },
      "FacebankBackfillRequest": {
        "properties": {
          "show_id": {
            "type": "string",
            "title": "Show Id",
            "description": "Show identifier (e.g., RHOBH)"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id",
            "description": "Optional cast id to limit reprocessing"
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "description": "When True, report actions without writing files or uploading to S3",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "show_id"
        ],
        "title": "FacebankBackfillRequest"
      },
      "FacebankResponse": {
        "properties": {
          "show_id": {
            "type": "string",
            "title": "Show Id"
          },
          "cast_id": {
            "type": "string",
            "title": "Cast Id"
          },
          "seeds": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Seeds"
          },
          "exemplars": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Exemplars"
          },
          "stats": {
            "type": "object",
            "title": "Stats"
          },
          "featured_seed_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Featured Seed Id"
          },
          "similarity": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity"
          }
        },
        "type": "object",
        "required": [
          "show_id",
          "cast_id",
          "seeds",
          "exemplars",
          "stats"
        ],
        "title": "FacebankResponse"
      },
      "FacesEmbedCeleryRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "device": {
            "type": "string",
            "enum": [
              "auto",
              "cpu",
              "mps",
              "coreml",
              "metal",
              "apple",
              "cuda"
            ],
            "title": "Device",
            "description": "Execution device",
            "default": "auto"
          },
          "save_frames": {
            "type": "boolean",
            "title": "Save Frames",
            "description": "Save sampled frames",
            "default": false
          },
          "save_crops": {
            "type": "boolean",
            "title": "Save Crops",
            "description": "Save face crops (enable explicitly to avoid storage bloat)",
            "default": false
          },
          "jpeg_quality": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Jpeg Quality",
            "description": "JPEG quality",
            "default": 72
          },
          "min_frames_between_crops": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Min Frames Between Crops",
            "description": "Min frames between crops",
            "default": 32
          },
          "thumb_size": {
            "type": "integer",
            "maximum": 512.0,
            "minimum": 64.0,
            "title": "Thumb Size",
            "description": "Thumbnail size",
            "default": 256
          },
          "cpu_threads": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 16.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Threads",
            "description": "CPU thread cap"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile"
          },
          "allow_cpu_fallback": {
            "type": "boolean",
            "title": "Allow Cpu Fallback",
            "description": "Allow falling back to CPU if requested accelerator is unavailable.",
            "default": false
          },
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "FacesEmbedCeleryRequest",
        "description": "Request model for Celery-based faces embed (harvest) job."
      },
      "FacesEmbedRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          },
          "profile": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "fast_cpu",
                  "low_power",
                  "balanced",
                  "high_accuracy"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile",
            "description": "Performance profile (fast_cpu/low_power/balanced/high_accuracy). Controls quality gating and sampling."
          },
          "device": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "auto",
                  "cpu",
                  "mps",
                  "coreml",
                  "metal",
                  "apple",
                  "cuda"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Device",
            "description": "Execution device (auto\u2192CUDA\u2192CoreML\u2192CPU; accepts coreml/metal/apple aliases)"
          },
          "save_frames": {
            "type": "boolean",
            "title": "Save Frames",
            "description": "Export sampled frames alongside crops",
            "default": false
          },
          "save_crops": {
            "type": "boolean",
            "title": "Save Crops",
            "description": "Export crops to data/frames + S3",
            "default": false
          },
          "jpeg_quality": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Jpeg Quality",
            "description": "JPEG quality for face crops",
            "default": 72
          },
          "min_frames_between_crops": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Min Frames Between Crops",
            "description": "Minimum frame gap between successive crops on the same track",
            "default": 32
          },
          "thumb_size": {
            "type": "integer",
            "maximum": 512.0,
            "minimum": 64.0,
            "title": "Thumb Size",
            "description": "Square thumbnail size",
            "default": 256
          },
          "cpu_threads": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 16.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cpu Threads",
            "description": "CPU thread limit for ML libraries (OMP, MKL, etc.)"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "FacesEmbedRequest"
      },
      "FeatureSeedResponse": {
        "properties": {
          "cast_id": {
            "type": "string",
            "title": "Cast Id"
          },
          "seed_id": {
            "type": "string",
            "title": "Seed Id"
          },
          "image_uri": {
            "type": "string",
            "title": "Image Uri"
          }
        },
        "type": "object",
        "required": [
          "cast_id",
          "seed_id",
          "image_uri"
        ],
        "title": "FeatureSeedResponse"
      },
      "FrameDeleteRequest": {
        "properties": {
          "track_id": {
            "type": "integer",
            "title": "Track Id"
          },
          "frame_idx": {
            "type": "integer",
            "title": "Frame Idx"
          },
          "delete_assets": {
            "type": "boolean",
            "title": "Delete Assets",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "track_id",
          "frame_idx"
        ],
        "title": "FrameDeleteRequest"
      },
      "GroupClustersRequest": {
        "properties": {
          "strategy": {
            "type": "string",
            "enum": [
              "auto",
              "manual",
              "facebank"
            ],
            "title": "Strategy",
            "description": "Grouping strategy",
            "default": "auto"
          },
          "cluster_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cluster Ids",
            "description": "Cluster IDs for manual grouping"
          },
          "target_person_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Person Id",
            "description": "Target person ID for manual grouping"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id",
            "description": "Cast ID to link to the person (for new or existing)"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Name for new person (when target_person_id is None)"
          },
          "protect_manual": {
            "type": "boolean",
            "title": "Protect Manual",
            "description": "If True, don't merge manually assigned clusters to different people",
            "default": true
          },
          "facebank_first": {
            "type": "boolean",
            "title": "Facebank First",
            "description": "If True, try facebank matching before people prototypes (more accurate)",
            "default": true
          },
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "title": "GroupClustersRequest"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "IdentityMergeRequest": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "target_id": {
            "type": "string",
            "title": "Target Id"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "target_id"
        ],
        "title": "IdentityMergeRequest"
      },
      "IdentityNameRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "show": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show",
            "description": "Optional show slug override"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "IdentityNameRequest"
      },
      "IdentityRenameRequest": {
        "properties": {
          "label": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 120
              },
              {
                "type": "null"
              }
            ],
            "title": "Label"
          }
        },
        "type": "object",
        "title": "IdentityRenameRequest"
      },
      "MatchRequest": {
        "properties": {
          "centroid": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Centroid",
            "description": "Face centroid embedding"
          },
          "threshold": {
            "type": "number",
            "maximum": 0.99,
            "minimum": 0.5,
            "title": "Threshold",
            "description": "Minimum similarity threshold",
            "default": 0.7
          },
          "item_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Item Type",
            "description": "Filter by type: person, cluster, track"
          }
        },
        "type": "object",
        "required": [
          "centroid"
        ],
        "title": "MatchRequest",
        "description": "Request to find matching archived items."
      },
      "MergeAllRequest": {
        "properties": {
          "similarity_threshold": {
            "type": "number",
            "title": "Similarity Threshold",
            "description": "Minimum similarity for auto-merge",
            "default": 0.9
          }
        },
        "type": "object",
        "title": "MergeAllRequest",
        "description": "Request to merge all high-similarity pairs."
      },
      "MergeClustersRequest": {
        "properties": {
          "cluster_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Cluster Ids",
            "description": "List of cluster IDs to merge"
          },
          "target_person_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Person Id",
            "description": "Optional person ID to merge into"
          }
        },
        "type": "object",
        "required": [
          "cluster_ids"
        ],
        "title": "MergeClustersRequest",
        "description": "Request to merge multiple clusters."
      },
      "MergeRequest": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "target_id": {
            "type": "string",
            "title": "Target Id"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "target_id"
        ],
        "title": "MergeRequest"
      },
      "MirrorArtifactsRequest": {
        "properties": {
          "artifacts": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Artifacts",
            "default": [
              "faces",
              "identities"
            ]
          }
        },
        "type": "object",
        "title": "MirrorArtifactsRequest",
        "description": "Request to mirror specific artifacts from S3 to local storage."
      },
      "MirrorArtifactsResponse": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "mirrored": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Mirrored"
          },
          "errors": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Errors"
          },
          "faces_manifest_exists": {
            "type": "boolean",
            "title": "Faces Manifest Exists"
          },
          "identities_manifest_exists": {
            "type": "boolean",
            "title": "Identities Manifest Exists"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "mirrored",
          "errors",
          "faces_manifest_exists",
          "identities_manifest_exists"
        ],
        "title": "MirrorArtifactsResponse",
        "description": "Response from mirroring artifacts."
      },
      "MoveTrackRequest": {
        "properties": {
          "track_id": {
            "type": "integer",
            "title": "Track Id"
          },
          "target_identity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Identity Id",
            "description": "Destination identity or null"
          }
        },
        "type": "object",
        "required": [
          "track_id"
        ],
        "title": "MoveTrackRequest"
      },
      "ParallelJobRequest": {
        "properties": {
          "episode_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Episode Ids",
            "description": "List of episode IDs to process"
          },
          "operation": {
            "type": "string",
            "title": "Operation",
            "description": "Operation to run: auto_group, refresh_similarity, manual_assign"
          },
          "options": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Options",
            "description": "Options to pass to each task"
          }
        },
        "type": "object",
        "required": [
          "episode_ids",
          "operation"
        ],
        "title": "ParallelJobRequest",
        "description": "Request model for running parallel jobs across multiple episodes."
      },
      "PersonAddAliasRequest": {
        "properties": {
          "alias": {
            "type": "string",
            "title": "Alias"
          }
        },
        "type": "object",
        "required": [
          "alias"
        ],
        "title": "PersonAddAliasRequest"
      },
      "PersonCreateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "aliases": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aliases"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id"
          }
        },
        "type": "object",
        "title": "PersonCreateRequest"
      },
      "PersonMergeRequest": {
        "properties": {
          "source_person_id": {
            "type": "string",
            "title": "Source Person Id"
          },
          "target_person_id": {
            "type": "string",
            "title": "Target Person Id"
          }
        },
        "type": "object",
        "required": [
          "source_person_id",
          "target_person_id"
        ],
        "title": "PersonMergeRequest"
      },
      "PersonResponse": {
        "properties": {
          "person_id": {
            "type": "string",
            "title": "Person Id"
          },
          "show_id": {
            "type": "string",
            "title": "Show Id"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "aliases": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Aliases",
            "default": []
          },
          "prototype": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Prototype"
          },
          "cluster_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Cluster Ids"
          },
          "rep_crop": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rep Crop"
          },
          "rep_crop_s3_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rep Crop S3 Key"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id"
          }
        },
        "type": "object",
        "required": [
          "person_id",
          "show_id",
          "name",
          "prototype",
          "cluster_ids",
          "rep_crop",
          "created_at"
        ],
        "title": "PersonResponse"
      },
      "PersonUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "rep_crop": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rep Crop"
          },
          "rep_crop_s3_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rep Crop S3 Key"
          },
          "aliases": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Aliases"
          },
          "cast_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cast Id"
          }
        },
        "type": "object",
        "title": "PersonUpdateRequest"
      },
      "PhaseStatus": {
        "properties": {
          "phase": {
            "type": "string",
            "title": "Phase"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "faces": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Faces"
          },
          "identities": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Identities"
          },
          "detections": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detections"
          },
          "tracks": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracks"
          },
          "detector": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detector"
          },
          "tracker": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tracker"
          },
          "device": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Device"
          },
          "requested_device": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Requested Device"
          },
          "resolved_device": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved Device"
          },
          "stride": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stride"
          },
          "det_thresh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Det Thresh"
          },
          "max_gap": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Gap"
          },
          "scene_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Threshold"
          },
          "scene_min_len": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Min Len"
          },
          "scene_warmup_dets": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scene Warmup Dets"
          },
          "track_high_thresh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Track High Thresh"
          },
          "new_track_thresh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Track Thresh"
          },
          "save_frames": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Save Frames"
          },
          "save_crops": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Save Crops"
          },
          "jpeg_quality": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Jpeg Quality"
          },
          "thumb_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumb Size"
          },
          "cluster_thresh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cluster Thresh"
          },
          "min_cluster_size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Cluster Size"
          },
          "min_identity_sim": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Identity Sim"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "finished_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Finished At"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source"
          },
          "runtime_sec": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Runtime Sec"
          },
          "singleton_merge_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Merge Enabled"
          },
          "singleton_fraction_before": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Fraction Before"
          },
          "singleton_fraction_after": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Fraction After"
          },
          "singleton_merge_neighbor_top_k": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Merge Neighbor Top K"
          },
          "singleton_merge_merge_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Merge Merge Count"
          },
          "singleton_merge_similarity_thresh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Merge Similarity Thresh"
          },
          "singleton_stats": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Singleton Stats"
          },
          "manifest_exists": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Manifest Exists"
          },
          "zero_rows": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Zero Rows"
          },
          "last_run_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Run At"
          },
          "track_metrics_exists": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Track Metrics Exists"
          }
        },
        "type": "object",
        "required": [
          "phase",
          "status"
        ],
        "title": "PhaseStatus"
      },
      "PresenceHeartbeat": {
        "properties": {
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User identifier"
          },
          "user_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Name",
            "description": "Display name",
            "default": "Anonymous"
          }
        },
        "type": "object",
        "title": "PresenceHeartbeat",
        "description": "Request body for presence heartbeat."
      },
      "PurgeAllLegacyIn": {
        "properties": {
          "confirm": {
            "type": "string",
            "title": "Confirm"
          },
          "delete_artifacts": {
            "type": "boolean",
            "title": "Delete Artifacts",
            "default": true
          },
          "delete_raw": {
            "type": "boolean",
            "title": "Delete Raw",
            "default": false
          },
          "delete_local": {
            "type": "boolean",
            "title": "Delete Local",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "confirm"
        ],
        "title": "PurgeAllLegacyIn"
      },
      "RefreshSimilarityRequest": {
        "properties": {
          "execution_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "redis",
                  "local"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Execution Mode",
            "description": "Execution mode: 'redis' enqueues job via Celery, 'local' runs synchronously in-process",
            "default": "redis"
          }
        },
        "type": "object",
        "title": "RefreshSimilarityRequest",
        "description": "Request model for similarity refresh with optional execution mode."
      },
      "RenameRequest": {
        "properties": {
          "identity_id": {
            "type": "string",
            "title": "Identity Id",
            "description": "Identity to rename"
          },
          "new_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Label",
            "description": "New label"
          }
        },
        "type": "object",
        "required": [
          "identity_id"
        ],
        "title": "RenameRequest"
      },
      "S3EpisodeForShow": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "season": {
            "type": "integer",
            "title": "Season"
          },
          "episode": {
            "type": "integer",
            "title": "Episode"
          },
          "key": {
            "type": "string",
            "title": "Key"
          },
          "exists_in_store": {
            "type": "boolean",
            "title": "Exists In Store"
          }
        },
        "type": "object",
        "required": [
          "ep_id",
          "season",
          "episode",
          "key",
          "exists_in_store"
        ],
        "title": "S3EpisodeForShow"
      },
      "S3EpisodesForShowResponse": {
        "properties": {
          "show": {
            "type": "string",
            "title": "Show"
          },
          "episodes": {
            "items": {
              "$ref": "#/components/schemas/S3EpisodeForShow"
            },
            "type": "array",
            "title": "Episodes"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "show",
          "episodes",
          "count"
        ],
        "title": "S3EpisodesForShowResponse"
      },
      "S3Show": {
        "properties": {
          "show": {
            "type": "string",
            "title": "Show"
          },
          "episode_count": {
            "type": "integer",
            "title": "Episode Count"
          }
        },
        "type": "object",
        "required": [
          "show",
          "episode_count"
        ],
        "title": "S3Show"
      },
      "S3ShowsResponse": {
        "properties": {
          "shows": {
            "items": {
              "$ref": "#/components/schemas/S3Show"
            },
            "type": "array",
            "title": "Shows"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "shows",
          "count"
        ],
        "title": "S3ShowsResponse"
      },
      "S3VideoItem": {
        "properties": {
          "bucket": {
            "type": "string",
            "title": "Bucket"
          },
          "key": {
            "type": "string",
            "title": "Key"
          },
          "ep_id": {
            "type": "string",
            "title": "Ep Id"
          },
          "show": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show"
          },
          "season": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Season"
          },
          "episode": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Episode"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "last_modified": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Modified"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "exists_in_store": {
            "type": "boolean",
            "title": "Exists In Store"
          },
          "key_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Key Version"
          }
        },
        "type": "object",
        "required": [
          "bucket",
          "key",
          "ep_id",
          "exists_in_store"
        ],
        "title": "S3VideoItem"
      },
      "S3VideosResponse": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/S3VideoItem"
            },
            "type": "array",
            "title": "Items"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "items",
          "count"
        ],
        "title": "S3VideosResponse"
      },
      "ShowCreateRequest": {
        "properties": {
          "show_id": {
            "type": "string",
            "title": "Show Id",
            "description": "Unique show identifier (slug)"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Short display name"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name",
            "description": "Full/legal show name"
          },
          "imdb_series_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Series Id",
            "description": "IMDb series identifier (e.g., tt2861424)"
          }
        },
        "type": "object",
        "required": [
          "show_id"
        ],
        "title": "ShowCreateRequest"
      },
      "ShowEntry": {
        "properties": {
          "show_id": {
            "type": "string",
            "title": "Show Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "imdb_series_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Series Id"
          },
          "cast_count": {
            "type": "integer",
            "title": "Cast Count"
          }
        },
        "type": "object",
        "required": [
          "show_id",
          "cast_count"
        ],
        "title": "ShowEntry"
      },
      "ShowListResponse": {
        "properties": {
          "shows": {
            "items": {
              "$ref": "#/components/schemas/ShowEntry"
            },
            "type": "array",
            "title": "Shows"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "shows",
          "count"
        ],
        "title": "ShowListResponse"
      },
      "ShowRegistrationResponse": {
        "properties": {
          "show_id": {
            "type": "string",
            "title": "Show Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "imdb_series_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Imdb Series Id"
          },
          "cast_count": {
            "type": "integer",
            "title": "Cast Count"
          },
          "created": {
            "type": "boolean",
            "title": "Created"
          }
        },
        "type": "object",
        "required": [
          "show_id",
          "cast_count",
          "created"
        ],
        "title": "ShowRegistrationResponse"
      },
      "TrackDeleteRequest": {
        "properties": {
          "delete_faces": {
            "type": "boolean",
            "title": "Delete Faces",
            "default": true
          }
        },
        "type": "object",
        "title": "TrackDeleteRequest"
      },
      "TrackFrameDeleteRequest": {
        "properties": {
          "frame_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "minItems": 1,
            "title": "Frame Ids",
            "description": "Track frame indices to delete"
          },
          "delete_assets": {
            "type": "boolean",
            "title": "Delete Assets",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "frame_ids"
        ],
        "title": "TrackFrameDeleteRequest"
      },
      "TrackFrameMoveRequest": {
        "properties": {
          "frame_ids": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "minItems": 1,
            "title": "Frame Ids",
            "description": "Track frame indices to move"
          },
          "target_identity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Identity Id",
            "description": "Existing identity target"
          },
          "new_identity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Identity Name",
            "description": "Optional new identity name"
          },
          "show_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Show Id",
            "description": "Optional show slug override"
          }
        },
        "type": "object",
        "required": [
          "frame_ids"
        ],
        "title": "TrackFrameMoveRequest"
      },
      "TrackMoveRequest": {
        "properties": {
          "target_identity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Identity Id"
          }
        },
        "type": "object",
        "title": "TrackMoveRequest"
      },
      "TrackRequest": {
        "properties": {
          "ep_id": {
            "type": "string",
            "title": "Ep Id",
            "description": "Episode identifier"
          }
        },
        "type": "object",
        "required": [
          "ep_id"
        ],
        "title": "TrackRequest"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}