# Default tracking configuration for single-person tracks
# Balanced thresholds - adjusted to include smaller faces while maintaining accuracy

# ByteTrack spatial matching
# Lowered track_thresh from 0.70 to 0.55 to track smaller/lower-confidence faces
track_thresh: 0.55      # Min confidence to track - lowered to include more faces
match_thresh: 0.65      # T3: IoU threshold for bbox matching (lowered from 0.85 to reduce track fragmentation)
track_buffer: 90        # Frames to keep track alive (â‰ˆ3-4s at typical TV FPS) - reduces track fragmentation
max_track_buffer: 300   # T10: Maximum buffer cap (prevents runaway memory on high-stride runs)

# T4: Separate thresholds for new vs. continuing tracks
# Lowered new_track_thresh from 0.85 to 0.60 to start tracks for smaller/partially occluded faces
new_track_thresh: 0.60  # Threshold for starting new tracks (was 0.85, then 0.70)
# track_thresh (0.55) is used for continuing existing tracks (easier to maintain than to start)

# T2: AppearanceGate enabled by default
gate_enabled: true      # Enable appearance-based track splitting

# T7: Softer appearance thresholds (prevent splits on temporary pose changes)
# Appearance gate thresholds set via environment variables in episode_run.py:
# - TRACK_GATE_APPEAR_HARD: default 0.70 - hard split if similarity < 70%
# - TRACK_GATE_APPEAR_SOFT: default 0.78 - soft split if similarity < 78%
# - TRACK_GATE_APPEAR_STREAK: default 2 - consecutive low-sim frames before split
# - TRACK_GATE_IOU: default 0.55 - split if spatial jump (IoU < 55%)
# - TRACK_GATE_EMB_EVERY: default 3 - extract embeddings every 3 frames for responsive appearance gating

# T5: Global Motion Compensation (GMC) for camera pans/zooms
# Set via SCREENALYTICS_GMC_METHOD environment variable (default: "sparseOptFlow")
# Options: "sparseOptFlow", "orb", "off"

# T6: FPS-scaled max gap
# TRACK_MAX_GAP_SEC: default 2.0 seconds (ensures gap is time-based, not frame-based)
